Сжатие файлов, с визуальным сохранением качества, перед публикацией на сайт

Если сжать не получилось, новый файл удаляется.